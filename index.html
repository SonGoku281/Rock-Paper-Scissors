<!DOCTYPE html>
<html>
    <head>

    </head>
    <body>

        <script>
            let states = ['paper','rock','scissor'];
            function computerPlay()
            {
                let choice = Math.floor(Math.random()*(3-1+1)+1);//Random number chocie among 1,2,3
                //console.log(choice);
                return choice;

                /*
                switch(choice){
                case 1:
                    return "rock";
                    break;
                case 2:
                    return "paper";
                    break;
                case 3:
                    return "scissor";
                    break;
                }*/
            }

            function playRound(playerSelection, computerSelection){
                //paper beats rock,rock beats scissor ,scissor beats paper
                
                if((playerSelection ==1 && computerSelection == 3) || (computerSelection==1 &&playerSelection == 3))
                {
                    if((playerSelection%3 < computerSelection%3))
                    {
                        console.log(`You win! ${states[playerSelection-1]} beats ${states[computerSelection-1]}`);
                        return 1;
                    }
                    else
                    {
                        console.log(`You lose! ${states[computerSelection-1]} beats ${states[playerSelection-1]}`);
                        return -1;
                    }

                }
                else
                {
                    if((playerSelection < computerSelection))
                    {
                        console.log(`You win! ${states[playerSelection-1]} beats ${states[computerSelection-1]}`);
                        return 1;
                    }
                    else if(computerSelection > playerSelection)
                    {
                        console.log(`You lose! ${states[computerSelection-1]} beats ${states[playerSelection-1]}`);
                        return -1;
                    }
                     else
                     {
                        console.log('It is a tie!');
                        return 0;

                     }
                }
            }

            function game()
            {
                let player = 0;//wins of player
                let comp = 0 ;
                
                for(let i=0; i<5; i++)
                {
                    
                    let playerSelection = prompt("Enter your selection of rock, paper or scissor");
                    playerSelection = playerSelection.toLowerCase();
                    playerSelection = (states.indexOf(playerSelection)+1);
                    let computerSelection = computerPlay();

                    let result = playRound(playerSelection,computerSelection);
                    if (result = 1)
                    player++;
                    else if(result = -1)
                    comp++;
                }
                if (player>comp)
                    console.log(`Player wins the game`);
                else if(player < comp)
                console.log(`Computer wins the game`);
                else
                console.log(`It is a tie!`);

                return;
            }

        </script>
    </body>
</html>